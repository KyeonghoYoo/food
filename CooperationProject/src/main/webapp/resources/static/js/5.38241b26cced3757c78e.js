webpackJsonp([5],{"9Lpd":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("bOdI"),r=s.n(a),n=s("1ihD"),i=s("0hZR"),o={name:"Append",components:{DetailTable:i.a,ListTable:i.b,ButtonToggle:n.a,DateRange:n.b,SearchForm:n.c,PageHeader:i.d,SelectItems:n.d},data:function(){return r()({menu:"",date:"",headers:[{text:"no",value:"num",sortable:!1},{text:"상품명",value:"string",sortable:!1},{text:"규격(단위)",value:"string",sortable:!1},{text:"제조사(원산지)",value:"string",sortable:!1},{text:"수량",value:"string",sortable:!1},{text:"매입 단가",value:"string",sortable:!1},{text:"배송 단가",value:"string",sortable:!1},{text:"소비자 가격",value:"string",sortable:!1},{text:"예비 가격",value:"string",sortable:!1},{text:"합계금액",value:"string",sortable:!1},{text:"삭제",value:"string",sortable:!1}],items:[],appendModalCheck:!1,productHeaders:[{text:"상품코드",value:"string",sortable:!1},{text:"상품명",value:"string",sortable:!1},{text:"카테고리",value:"string",sortable:!1},{text:"규격(단위)",value:"string",sortable:!1},{text:"제조사(원산지)",value:"string",sortable:!1},{text:"매입단가",value:"string",sortable:!1},{text:"선택",value:"string",sortable:!1}],customersHeaders:[{text:"no",value:"num",sortable:!1},{text:"매입처명",value:"string",sortable:!1},{text:"대표자 연락처",value:"string",sortable:!1},{text:"상품 수",value:"num",sortable:!1},{text:"매입처 선택",value:"string",sortable:!1}],customersItems:[],customersItem:"",customerProducts:[],selectItems:[],count:1,orderItems:[],allCount:0,payment:0,purchase:[],qTY:[],price:[],origin:[],deleteItem:[],insertItem:[]},"customersItem",[])},methods:{initPurchase:function(t){var e=this;this.$axios.get("http://freshntech.cafe24.com/purchaseitem/detail/"+t).then(function(t){e.customersItem=t.data[0],e.orderItems=t.data[1],e.date=e.customersItem.regDate;for(var s=0;s<e.orderItems.length;s++)e.qTY[s]=e.orderItems[s].qTY,e.price[s]=e.orderItems[s].price,e.origin.push(e.orderItems[s])}).catch(function(t){console.log("Error : ",t)}),this.$axios.get("http://freshntech.cafe24.com/purchase/detail/"+this.$route.params.order_id).then(function(t){e.customerProducts=t.data[1],console.log(e.customerProducts)}).catch(function(t){console.log("Error : ",t)})},openAppendModal:function(){""!=this.customersItem?this.appendModalCheck=!this.appendModalCheck:alert("매입처를 선택하십시오")},selectProduct:function(t,e){this.orderItems.push(e),this.insertItem.push(e),this.price[this.orderItems.length-1]=e.price,this.allCount++,console.log(this.origin)},closeProductAppendModal:function(){this.selectItems=[],this.allCount=this.selectItems.length,this.appendModalCheck=!1},deleteOneOrderItem:function(t){this.orderItems.forEach(function(e,s,a){e==t&&a.splice(s,1)}),this.deleteItem.push(t),this.allCount--},update:function(){var t=this;this.orderItems.qTY=this.qTY;for(var e=0;e<this.orderItems.length;e++)this.orderItems[e].qTY=this.qTY[e];this.$axios.put("http://freshntech.cafe24.com/purchaseitem",{id:this.$route.params.order_id,bName:this.customersItem.bName,state:this.customersItem.state,tbProvider_ID:this.customersItem.tbProvider_ID,remark:this.customersItem.remark,dDay:this.date,insertPurchaseItemVOList:this.insertItem,updatePurchaseItemVOList:this.origin,deletePurchaseItemStringList:this.deleteItem}).then(function(e){alert("수정이 완료되었습니다."),t.$router.push("/purchase/list")}).catch(function(t){console.log("Error : ",t)})},deletePurchase:function(){var t=this;this.$axios.delete("http://freshntech.cafe24.com/purchaseitem/"+this.customersItem.id,{}).then(function(e){alert("삭제가 완료되었습니다."),t.$router.push("/purchase/list")}).catch(function(t){console.log("Error : ",t)})}},created:function(){var t=this.$route.params.order_id;this.$set(this,"buyer_id",t),this.initPurchase(t)}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("page-header",{attrs:{title:"발주 수정"}}),t._v(" "),s("h3",{staticStyle:{"margin-top":"15px"}},[t._v("발주 정보")]),t._v(" "),s("v-layout",[s("v-flex",[s("detail-table",[s("tbody",{attrs:{slot:"contents"},slot:"contents"},[s("tr",[s("th",[s("h4",{staticClass:"center-align"},[t._v("매입처명 *")])]),t._v(" "),s("td",{staticStyle:{width:"30%"}},[t._v("\n                "+t._s(t.customersItem.bName)+"\n            ")]),t._v(" "),s("th",[t._v("납기일자*")]),t._v(" "),s("td",[s("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.date=e}},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[s("v-text-field",{attrs:{slot:"activator",label:"납기일자를 선택하세요","prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),s("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),t._v(" "),s("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.date)}}},[t._v("OK")])],1)],1)],1)]),t._v(" "),s("tr",[s("th",[s("h4",{staticClass:"center-align"},[t._v("상품상태 *")])]),t._v(" "),s("td",[s("v-flex",{staticClass:"select-container"},[s("v-select",{attrs:{items:["발주준비","발주취소","발주완료","입고완료","입고반품"],label:"상품상태를 선택하세요"},model:{value:t.customersItem.state,callback:function(e){t.$set(t.customersItem,"state",e)},expression:"customersItem.state"}})],1)],1)]),t._v(" "),s("tr",[s("th",[t._v("비고")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[s("v-layout",[s("v-flex",[s("v-text-field",{attrs:{textarea:"",rows:"2"},model:{value:t.customersItem.remark,callback:function(e){t.$set(t.customersItem,"remark",e)},expression:"customersItem.remark"}})],1)],1)],1)])])])],1)],1),t._v(" "),s("h3",{staticStyle:{"margin-top":"15px"}},[t._v("발주 목록")]),t._v(" "),s("v-layout",{staticStyle:{"padding-top":"20px"}},[s("v-flex",[t._v("\n      전체 "+t._s(t.allCount)+"건\n    ")]),t._v(" "),s("v-flex",{staticStyle:{"text-align":"right"}},[s("v-btn",{attrs:{color:"orange",outline:""},on:{click:function(e){t.openAppendModal()}}},[t._v("\n        상품 추가\n      ")])],1)],1),t._v(" "),s("v-layout",[s("v-flex",[s("v-data-table",{attrs:{headers:t.headers,items:t.orderItems,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v("\n            "+t._s(e.index+1)+"\n          ")]),t._v(" "),s("td",[t._v(t._s(e.item.itemName))]),t._v(" "),s("td",[t._v(t._s(e.item.unit))]),t._v(" "),s("td",[t._v(t._s(e.item.manufacturer))]),t._v(" "),s("td",[s("v-text-field",{model:{value:t.qTY[e.index],callback:function(s){t.$set(t.qTY,e.index,s)},expression:"qTY[props.index]"}})],1),t._v(" "),s("td",[s("v-text-field",{model:{value:t.price[e.index],callback:function(s){t.$set(t.price,e.index,s)},expression:"price[props.index]"}})],1),t._v(" "),s("td",[t._v(t._s(e.item.price1)+"원")]),t._v(" "),s("td",[t._v(t._s(e.item.price2)+"원")]),t._v(" "),s("td",[t._v(t._s(e.item.price3)+"원")]),t._v(" "),s("td",[t._v("\n            "+t._s(t.qTY[e.index]*t.price[e.index])+"원\n          ")]),t._v(" "),s("td",[s("v-btn",{attrs:{outline:""},on:{click:function(s){t.deleteOneOrderItem(e.item)}}},[t._v("삭제")])],1)]}}])})],1)],1),t._v(" "),s("v-layout",{staticStyle:{"margin-top":"20px"}},[s("v-flex",{staticStyle:{"text-align":"center"}},[s("v-btn",{on:{click:function(e){t.$router.push("/purchase/list")}}},[t._v("목록으로")]),t._v(" "),s("v-btn",{on:{click:function(e){t.update()}}},[t._v("수정하기")]),t._v(" "),s("v-btn",{on:{click:function(e){t.deletePurchase()}}},[t._v("삭제하기")])],1)],1),t._v(" "),s("v-dialog",{attrs:{width:"70%"},model:{value:t.appendModalCheck,callback:function(e){t.appendModalCheck=e},expression:"appendModalCheck"}},[s("v-card",[s("div",{staticStyle:{padding:"10px","background-color":"#263238",color:"white",height:"48px"}},[s("h3",[t._v("직배송 상품 검색 및 선택")])]),t._v(" "),s("v-container",[s("v-layout",[s("v-flex",[s("detail-table",[s("tbody",{attrs:{slot:"contents"},slot:"contents"},[s("tr",[s("th",[t._v("즉시검색")]),t._v(" "),s("td",[s("v-layout",[s("v-flex",{staticStyle:{"padding-right":"10px"},attrs:{xs3:""}},[s("v-select",{attrs:{items:["test","test2"],label:"1차카테고리"}})],1),t._v(" "),s("v-flex",{staticStyle:{"padding-right":"10px"},attrs:{xs3:""}},[s("v-select",{attrs:{items:["test2","test"],label:"2차카테고리"}})],1),t._v(" "),s("v-flex",{attrs:{xs6:""}},[s("search-form",{attrs:{label:"검색어를 입력해 주세요"}})],1)],1)],1),t._v(" "),s("td",[s("v-btn",[t._v("검색")])],1)])])])],1)],1),t._v(" "),s("v-layout",{staticStyle:{"margin-top":"15px"}},[s("v-flex",{staticStyle:{padding:"0px 5px"},attrs:{xs12:""}},[s("v-layout",[s("v-flex",[t._v("\n                *해당 매입처에서 자주 주문한 상품 순입니다.\n              ")])],1),t._v(" "),s("v-layout",{staticStyle:{"margin-top":"10px"}},[s("v-flex",[s("v-data-table",{attrs:{headers:t.productHeaders,items:t.customerProducts,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v(t._s(e.item.id))]),t._v(" "),s("td",[t._v(t._s(e.item.itemName))]),t._v(" "),s("td",[t._v(t._s(e.item.first))]),t._v(" "),s("td",[t._v(t._s(e.item.unit))]),t._v(" "),s("td",[t._v(t._s(e.item.manufacturer))]),t._v(" "),s("td",[t._v(t._s(e.item.price2))]),t._v(" "),s("td",[s("v-btn",{attrs:{outline:""},on:{click:function(s){t.selectProduct(e.index,e.item)}}},[t._v("선택")])],1)]}}])})],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var c=s("VU/8")(o,l,!1,function(t){s("rfA4")},"data-v-c6a673ba",null);e.default=c.exports},rfA4:function(t,e){}});
//# sourceMappingURL=5.38241b26cced3757c78e.js.map