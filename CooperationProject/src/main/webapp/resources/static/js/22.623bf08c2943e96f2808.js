webpackJsonp([22],{"5LL1":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("bOdI"),r=a.n(s),i=a("1ihD"),n=a("0hZR"),o={name:"BrandList",components:{SearchForm:i.c,ButtonToggle:i.a,SelectItems:i.d,PageHeader:n.d,ListTable:n.b,DetailTable:n.a,Modal:n.c,DateRange:i.b},data:function(){var t;return t={modal:{taxbill:!1},headers:[{text:"no",value:"num",sortable:!1},{text:"상품명",value:"string",sortable:!1},{text:"규격(단위)",value:"string",sortable:!1},{text:"제조사(원산지)",value:"string",sortable:!1},{text:"수량",value:"string",sortable:!1},{text:"배송 단가",value:"string",sortable:!1},{text:"소비자 가격",value:"string",sortable:!1},{text:"예비 가격",value:"string",sortable:!1},{text:"합계금액",value:"string",sortable:!1},{text:"삭제",value:"string",sortable:!1}],productHeaders:[{text:"상품명",value:"strings",sortable:!1},{text:"재고량",value:"string",sortable:!1},{text:"배송 단가",value:"string",sortable:!1},{text:"소비자 가격",value:"string",sortable:!1},{text:"예비 가격",value:"string",sortable:!1},{text:"선택",value:"string",sortable:!1}],customersModalCheck:!1,customersHeaders:[{text:"no",value:"num",sortable:!1},{text:"거래처명",value:"string",sortable:!1},{text:"거래처 연락처",value:"string",sortable:!1},{text:"배송 담당자",value:"string",sortable:!1},{text:"거래처 선택",value:"string",sortable:!1}],appendModalCheck:!1,loading:!0,search:"",customerProducts:[],selectItems:[],pagination:{},selected:[],page:1,order_id:null,customer:null,orderData:[],orderItems:[],allCount:0,date:null,menu:!1},r()(t,"modal",!1),r()(t,"menu2",!1),r()(t,"count",1),r()(t,"updateItems",[]),r()(t,"deleteOrderItems",[]),r()(t,"insertProvierItemList",[]),r()(t,"totalPrice",0),t},methods:{getCustomer:function(t){var e=this;this.$axios.get("http://freshntech.cafe24.com/order/detail/"+t).then(function(t){e.orderData=t.data[0],e.orderItems=t.data[1],e.customerProducts=t.data[2],e.allCount=e.orderItems.length;for(var a=0;a<e.customerProducts.length;a++)e.customerProducts[a].qTY=1,e.customerProducts[a].selectPrice=e.customerProducts[a].price3;for(a=0;a<t.data[1].length;a++)e.insertProvierItemList.push(e.orderItems[a])}).catch(function(t){console.log("Error : ",t)}),setTimeout(function(){e.$set(e,"loading",!1)},750)},selectProduct:function(t){if(null==this.selectItems[0])this.selectItems.push(t),this.allCount++,this.totalPrice+=this.selectItems[0].price3*this.selectItems[0].qTY;else{for(var e=0,a=0;a<this.selectItems.length;a++){if(t.itemName==this.selectItems[a].itemName){this.selectItems[a].qTY++,this.totalPrice+=Number(this.selectItems[a].price3);break}e++}this.selectItems.length==e&&(this.selectItems.push(t),this.totalPrice+=Number(this.selectItems[e].price3),this.allCount++)}},openAppendModal:function(){this.appendModalCheck=!this.appendModalCheck},closeProductAppendModal:function(){this.allCount=this.selectItems.length,this.appendModalCheck=!1},regOrder:function(){var t=this;this.$axios.put("http://freshntech.cafe24.com/order",{id:this.orderData.id,requests:this.orderData.requests,memo:this.orderData.memo,reqDate:this.orderData.reqDate,insertProduct:this.updateItems,updateProduct:this.insertProvierItemList,deleteProduct:this.deleteOrderItems}).then(function(e){alert("수정이 완료되었습니다."),t.$router.push("/order/list")}).catch(function(t){console.log("Error : ",t)})},deleteOrder:function(){var t=this;this.$axios.delete("http://freshntech.cafe24.com/order/"+this.orderData.id).then(function(e){alert("삭제가 완료되었습니다."),t.$router.push("/order/list")}).catch(function(t){console.log("Error : ",t)})},numberWithCommas:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},saveOrderItem:function(){var t=this;this.updateItems=this.updateItems.concat(this.selectItems),this.orderItems=this.selectItems.concat(this.orderItems),this.appendModalCheck=!1,this.$axios.get("http://freshntech.cafe24.com/order/setinsert/"+this.customersItem.id).then(function(e){t.customerProducts=e.data}).catch(function(t){console.log("Error : ",t)})},deleteOneOrderItem:function(t){this.deleteOrderItems.push(t.id),this.orderItems.forEach(function(e,a,s){e==t&&s.splice(a,1)}),this.allCount--},countModify:function(t,e,a){"up"==t?(this.selectItems[e].qTY++,this.totalPrice+=Number(this.selectItems[e].price3)):"down"==t&&(this.selectItems[e].qTY--,this.totalPrice-=Number(this.selectItems[e].price3))}},created:function(){var t=this.$route.params.order_id;this.$set(this,"order_id",t),this.getCustomer(t)}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticStyle:{}},[a("page-header",{attrs:{title:"주문 상세보기"}}),t._v(" "),a("br"),t._v(" "),t.loading?a("v-layout",{attrs:{row:""}},[a("v-flex",{staticStyle:{"text-align":"center"},attrs:{xs12:"",md12:""}},[a("br"),t._v(" "),a("v-progress-circular",{staticStyle:{width:"200px !important"},attrs:{value:80,width:2,size:50,color:"deep-orange lighten-2",indeterminate:""}}),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br")],1)],1):a("div",[a("div",{staticClass:"cardbox cardbox-header"},[a("h3",[t._v("주문 정보")])]),t._v(" "),a("v-layout",{staticStyle:{padding:"0"},attrs:{row:"",cardbox:"","cardbox-body":""}},[a("v-flex",{attrs:{xs12:"",md12:""}},[a("table",{staticClass:"td-margin",staticStyle:{width:"94%"}},[a("colgroup",[a("col",{attrs:{width:"15%"}}),t._v(" "),a("col",{attrs:{width:"35%"}}),t._v(" "),a("col",{attrs:{width:"15%"}}),t._v(" "),a("col",{attrs:{width:"35%"}})]),t._v(" "),a("tr",[a("th",[a("h4",{staticClass:"center-align"},[t._v("주문 번호")])]),t._v(" "),a("td",[t._v("\n                      "+t._s(t.orderData.id)+"\n                    ")]),t._v(" "),a("th",[a("h4",{staticClass:"center-align"},[t._v("주문 일자")])]),t._v(" "),a("td",[t._v("\n                      "+t._s(t.orderData.reqDate)+"\n                    ")])]),t._v(" "),a("tr",[a("th",[a("h4",{staticClass:"center-align"},[t._v("거래처명")])]),t._v(" "),a("td",[t._v("\n                      "+t._s(t.orderData.cBName)+"\n                    ")]),t._v(" "),a("th",[a("h4",{staticClass:"center-align"},[t._v("결제 수단")])]),t._v(" "),a("td",[t._v("\n                      "+t._s(t.orderData.payMethod)+"\n                    ")])]),t._v(" "),a("tr",[a("th",[a("h4",{staticClass:"center-align"},[t._v("담당자 / 연락처")])]),t._v(" "),a("td",[t._v("\n                      "+t._s(t.orderData.dManager)+" / "+t._s(t.orderData.tel)+"\n                    ")]),t._v(" "),a("th",[a("h4",{staticClass:"center-align"},[t._v("총 주문 금액")])]),t._v(" "),a("td",[t._v("\n                      "+t._s(t.orderData.amount)+"원\n                    ")])]),t._v(" "),a("tr",[a("th",[a("h4",{staticClass:"center-align"},[t._v("거래처 주소")])]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v("\n                      "+t._s(t.orderData.address1)+" "+t._s(t.orderData.address2)+" "+t._s(t.orderData.address3)+"\n                    ")])])])])],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"cardbox cardbox-header"},[a("h3",[t._v("배송 정보")])]),t._v(" "),a("v-layout",{staticStyle:{padding:"0"},attrs:{row:"",cardbox:"","cardbox-body":""}},[a("v-flex",{attrs:{xs12:"",md12:""}},[a("table",{staticClass:"td-margin",staticStyle:{width:"94%"}},[a("colgroup",[a("col",{attrs:{width:"15%"}}),t._v(" "),a("col",{attrs:{width:"35%"}}),t._v(" "),a("col",{attrs:{width:"15%"}}),t._v(" "),a("col",{attrs:{width:"35%"}})]),t._v(" "),a("tr",[a("th",[a("h4",{staticClass:"center-align"},[t._v("배송 요청일")])]),t._v(" "),a("td",[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.date=e}},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-text-field",{attrs:{slot:"activator",label:"배송 요청일을 선택하세요","prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.orderData.reqDate,callback:function(e){t.$set(t.orderData,"reqDate",e)},expression:"orderData.reqDate"}}),t._v(" "),a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.orderData.reqDate,callback:function(e){t.$set(t.orderData,"reqDate",e)},expression:"orderData.reqDate"}},[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),t._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.date)}}},[t._v("OK")])],1)],1)],1)]),t._v(" "),a("tr",[a("th",[a("h4",{staticClass:"center-align"},[t._v("배송 담당자")])]),t._v(" "),a("td",[t._v("\n                  "+t._s(t.orderData.dManager)+"\n                ")]),t._v(" "),a("th",[a("h4",{staticClass:"center-align"},[t._v("영업 담당자")])]),t._v(" "),a("td",[t._v("\n                  "+t._s(t.orderData.cManager)+"\n                ")])]),t._v(" "),a("tr",[a("th",[a("h4",{staticClass:"center-align"},[t._v("요청 사항")])]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("v-textarea",{attrs:{name:"input-7-1",rows:"2"},model:{value:t.orderData.requests,callback:function(e){t.$set(t.orderData,"requests",e)},expression:"orderData.requests"}})],1)]),t._v(" "),a("tr",[a("th",[a("h4",{staticClass:"center-align"},[t._v("메모")])]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("v-textarea",{attrs:{name:"input-7-1",rows:"2"},model:{value:t.orderData.memo,callback:function(e){t.$set(t.orderData,"memo",e)},expression:"orderData.memo"}})],1)])])])],1),t._v(" "),a("br"),t._v(" "),a("h3",{staticStyle:{"margin-top":"15px"}},[t._v("상품 목록")]),t._v(" "),a("v-layout",{staticStyle:{"padding-top":"20px"}},[a("v-flex",[t._v("\n    전체 "+t._s(t.allCount)+"건\n  ")]),t._v(" "),a("v-flex",{staticStyle:{"text-align":"right"}},[a("v-btn",{attrs:{color:"orange",outline:""},on:{click:function(e){t.openAppendModal()}}},[t._v("\n      상품 추가\n    ")])],1)],1),t._v(" "),a("v-layout",[a("v-flex",[a("v-data-table",{attrs:{headers:t.headers,items:t.orderItems,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v("\n          "+t._s(e.index+1)+"\n        ")]),t._v(" "),a("td",[t._v(t._s(e.item.itemName))]),t._v(" "),a("td",[t._v(t._s(e.item.unit))]),t._v(" "),a("td",[t._v(t._s(e.item.manufacturer))]),t._v(" "),a("td",[t._v(t._s(e.item.qTY))]),t._v(" "),a("td",[t._v(t._s(e.item.price1))]),t._v(" "),a("td",[t._v(t._s(e.item.price2))]),t._v(" "),a("td",[t._v(t._s(e.item.price3))]),t._v(" "),a("td",[t._v(t._s(e.item.price1*e.item.qTY))]),t._v(" "),a("td",[a("v-btn",{attrs:{outline:""},on:{click:function(a){t.deleteOneOrderItem(e.item)}}},[t._v("삭제")])],1)]}}])})],1)],1),t._v(" "),a("v-layout",{staticStyle:{"margin-top":"20px"}},[a("v-flex",{staticStyle:{"text-align":"center"}},[a("v-btn",{on:{click:function(e){t.$router.push("/order/list")}}},[t._v("목록으로")]),t._v(" "),a("v-btn",{on:{click:function(e){t.regOrder()}}},[t._v("수정하기")]),t._v(" "),a("v-btn",{on:{click:function(e){t.deleteOrder()}}},[t._v("삭제하기")])],1)],1),t._v(" "),a("v-dialog",{attrs:{width:"70%"},model:{value:t.appendModalCheck,callback:function(e){t.appendModalCheck=e},expression:"appendModalCheck"}},[a("v-card",[a("div",{staticStyle:{padding:"10px","background-color":"#263238",color:"white",height:"48px"}},[a("h3",[t._v("직배송 상품 검색 및 선택")])]),t._v(" "),a("v-container",[a("v-layout",[a("v-flex",[a("detail-table",[a("tbody",{attrs:{slot:"contents"},slot:"contents"},[a("tr",[a("th",[t._v("즉시검색")]),t._v(" "),a("td",[a("v-layout",[a("v-flex",{staticStyle:{"padding-right":"10px"},attrs:{xs3:""}},[a("v-select",{attrs:{items:["test","test2"],label:"1차카테고리"}})],1),t._v(" "),a("v-flex",{staticStyle:{"padding-right":"10px"},attrs:{xs3:""}},[a("v-select",{attrs:{items:["test2","test"],label:"2차카테고리"}})],1),t._v(" "),a("v-flex",{attrs:{xs6:""}},[a("search-form",{attrs:{label:"검색어를 입력해 주세요"}})],1)],1)],1),t._v(" "),a("td",[a("v-btn",[t._v("검색")])],1)])])])],1)],1),t._v(" "),a("v-layout",{staticStyle:{"margin-top":"15px"}},[a("v-flex",{staticStyle:{padding:"0px 5px"},attrs:{xs8:""}},[a("v-layout",[a("v-flex",[t._v("\n              *해당 거래처에서 자주 주문한 상품 순입니다.\n            ")]),t._v(" "),a("v-flex",[t._v("\n              전체 "+t._s(t.allCount)+"건\n            ")])],1),t._v(" "),a("v-layout",{staticStyle:{"margin-top":"10px"}},[a("v-flex",[a("v-data-table",{attrs:{headers:t.productHeaders,items:t.customerProducts,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.itemName))]),t._v(" "),a("td",[t._v(t._s(e.item.itemQTY))]),t._v(" "),a("td",[t._v(t._s(e.item.price1))]),t._v(" "),a("td",[t._v(t._s(e.item.price2))]),t._v(" "),a("td",[t._v(t._s(e.item.price3))]),t._v(" "),a("td",[a("v-btn",{attrs:{outline:""},on:{click:function(a){t.selectProduct(e.item)}}},[t._v("선택")])],1)]}}])})],1)],1)],1),t._v(" "),a("v-flex",{staticStyle:{padding:"0px 5px"},attrs:{xs4:""}},[a("v-layout",[a("v-flex",[a("span",[t._v("선택상품 목록(전체 "+t._s(t.allCount)+"건)")])]),t._v(" "),a("v-flex",{staticStyle:{"text-align":"right"}},[a("v-btn",{on:{click:function(e){t.defaultSelectItem()}}},[t._v("초기화")])],1)],1),t._v(" "),a("v-layout",{staticStyle:{"margin-top":"10px",border:"2px solid #cccccc","min-height":"600px"}},[a("v-flex",{attrs:{xs12:"",md12:"",sm12:""}},[a("v-data-table",{attrs:{"hide-headers":"","hide-actions":"",items:t.selectItems},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-layout",[a("v-flex",{attrs:{xs11:""}},[t._v(t._s(e.item.itemName))]),t._v(" "),a("v-flex",{attrs:{xs1:""}},[a("span",{on:{click:function(a){t.deleteOneItem(e.item)}}},[a("span",{staticClass:"fas fa-times"})])])],1),t._v(" "),a("v-layout",[a("v-flex",[a("span",{on:{click:function(a){t.countModify("up",e.index,e.item)}}},[a("span",{staticClass:"fas fa-angle-up"})]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.qTY,expression:"props.item.qTY"}],staticStyle:{width:"30px","text-align":"center"},attrs:{type:"text"},domProps:{value:e.item.qTY},on:{input:function(a){a.target.composing||t.$set(e.item,"qTY",a.target.value)}}}),t._v(" "),a("span",{on:{click:function(a){t.countModify("down",e.index,e.item)}}},[a("span",{staticClass:"fas fa-angle-down"})])]),t._v(" "),a("v-flex",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.price2,expression:"props.item.price2"}],staticStyle:{"text-align":"right"},attrs:{type:"text"},domProps:{value:e.item.price2},on:{input:function(a){a.target.composing||t.$set(e.item,"price2",a.target.value)}}}),t._v("원\n                      ")])],1)],1)]}}])},[a("template",{slot:"footer"},[a("td",[a("v-layout",[a("v-flex",[t._v("합계 금액")]),t._v(" "),a("v-flex",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.totalPrice)+"원")])],1)],1)])],2)],1)],1)],1)],1),t._v(" "),a("v-layout",{staticStyle:{"text-align":"center"}},[a("v-flex",[a("v-btn",{on:{click:function(e){t.closeProductAppendModal()}}},[t._v("닫기")]),t._v(" "),a("v-btn",{on:{click:function(e){t.saveOrderItem()}}},[t._v("저장")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,l,!1,function(t){a("bVCc")},null,null);e.default=c.exports},bVCc:function(t,e){}});
//# sourceMappingURL=22.623bf08c2943e96f2808.js.map