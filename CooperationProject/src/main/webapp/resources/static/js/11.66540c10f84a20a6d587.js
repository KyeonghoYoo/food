webpackJsonp([11],{"2ssE":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("bOdI"),i=s.n(a),o=s("1ihD"),n=s("0hZR"),r={name:"Append",components:{DetailTable:n.a,ListTable:n.b,ButtonToggle:o.a,DateRange:o.b,SearchForm:o.c,PageHeader:n.d,SelectItems:o.d},data:function(){return{menu:"",date:"",headers:[{text:"no",value:"num",sortable:!1},{text:"상품명",value:"string",sortable:!1},{text:"규격(단위)",value:"string",sortable:!1},{text:"제조사(원산지)",value:"string",sortable:!1},{text:"수량",value:"string",sortable:!1},{text:"배송 단가",value:"string",sortable:!1},{text:"소비자 가격",value:"string",sortable:!1},{text:"예비 가격",value:"string",sortable:!1},{text:"합계금액",value:"string",sortable:!1},{text:"삭제",value:"string",sortable:!1}],items:[],appendModalCheck:!1,productHeaders:[{text:"상품명",value:"strings",sortable:!1},{text:"재고량",value:"string",sortable:!1},{text:"배송 단가",value:"string",sortable:!1},{text:"소비자 가격",value:"string",sortable:!1},{text:"예비 가격",value:"string",sortable:!1},{text:"선택",value:"string",sortable:!1}],customersModalCheck:!1,customersHeaders:[{text:"no",value:"num",sortable:!1},{text:"거래처명",value:"string",sortable:!1},{text:"거래처 연락처",value:"string",sortable:!1},{text:"배송 담당자",value:"string",sortable:!1},{text:"거래처 선택",value:"string",sortable:!1}],customersItems:[],customersItem:"",customerProducts:[],selectItems:[],deliveryCategory:"직배송",manager:"",shippingManager:"",orderItems:[],shipping:[],allCount:0,payment:0,totalPrice:0}},methods:{initCustormer:function(){var t=this;this.$axios.get("http://freshntech.cafe24.com/order/setinsert").then(function(e){t.shippingManager=e.data[0];for(var s=0;s<t.shippingManager.length;s++)t.shipping.push(t.shippingManager[s].sManager);t.customersItems=e.data[1]}).catch(function(t){console.log("Error : ",t)})},selectCustomer:function(t){var e=this;this.customersItem=t,this.orderItems=[],this.selectItems=[],this.customersModalCheck=!1,this.$axios.get("http://freshntech.cafe24.com/order/setinsert/"+this.customersItem.id).then(function(t){e.customerProducts=t.data;for(var s=0;s<e.customerProducts.length;s++)e.customerProducts[s].qTY=1,e.customerProducts[s].selectPrice=e.customerProducts[s].price3}).catch(function(t){console.log("Error : ",t)})},openAppendModal:function(){""!=this.customersItem?this.appendModalCheck=!this.appendModalCheck:alert("거래처를 선택하십시오")},countModify:function(t,e,s){"up"==t?(this.selectItems[e].qTY++,this.totalPrice+=Number(this.selectItems[e].price3)):"down"==t&&(this.selectItems[e].qTY--,this.totalPrice-=Number(this.selectItems[e].price3))},selectProduct:function(t){if(null==this.selectItems[0])this.selectItems.push(t),this.allCount++,this.totalPrice+=this.selectItems[0].price3*this.selectItems[0].qTY;else{for(var e=0,s=0;s<this.selectItems.length;s++){if(t.itemName==this.selectItems[s].itemName){this.selectItems[s].qTY++,this.totalPrice+=Number(this.selectItems[s].price3);break}e++}this.selectItems.length==e&&(this.selectItems.push(t),this.totalPrice+=Number(this.selectItems[e].price3),this.allCount++)}},defaultSelectItem:function(){this.totalPrice=0,this.selectItems=[],this.allCount=0},deleteOneItem:function(t){this.selectItems.forEach(function(e,s,a){e==t&&a.splice(s,1)}),this.allCount--},closeProductAppendModal:function(){this.selectItems=[],this.allCount=this.selectItems.length,this.appendModalCheck=!1},saveOrderItem:function(){for(var t=this,e=0;e<this.selectItems.length;e++)this.selectItems[e].amount=this.selectItems[e].qTY*this.selectItems[e].price3;this.orderItems=this.selectItems,this.appendModalCheck=!1,this.$axios.get("http://freshntech.cafe24.com/order/setinsert/"+this.customersItem.id).then(function(e){t.customerProducts=e.data}).catch(function(t){console.log("Error : ",t)})},deleteOneOrderItem:function(t){this.orderItems.forEach(function(e,s,a){e==t&&a.splice(s,1)}),this.allCount--},regOrder:function(){var t=this;if(this.orderItems.amount=this.selectItems.price,this.customersItem.bName)if(""==this.date)alert("배송요청일을 선택해주세요");else if(0==this.orderItems.length)alert("상품을 먼저 등록해주세요");else{var e;this.$axios.post("http://freshntech.cafe24.com/order",(e={tbCustomer_ID:this.customersItem.id,itemCount:this.allCount,amount:this.allCount,payment:this.payment,payMethod:this.payMethod,requests:this.requests,memo:this.memo},i()(e,"amount",this.totalPrice),i()(e,"insertProduct",this.orderItems),e)).then(function(e){alert("주문이 완료되었습니다."),t.$router.push("/order/list")}).catch(function(t){alert("에러 발생"),console.log("Error : ",t)})}else alert("거래처가 선택되지 않았습니다.")},numberWithCommas:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},created:function(){this.initCustormer()}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("page-header",{attrs:{title:"신규 주문 등록"}}),t._v(" "),s("h3",{staticStyle:{"margin-top":"15px"}},[t._v("주문 정보")]),t._v(" "),s("v-layout",[s("v-flex",[s("detail-table",[s("tbody",{attrs:{slot:"contents"},slot:"contents"},[s("tr",[s("th",[t._v("거래처 선택 *")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[s("v-layout",[s("v-flex",{attrs:{xs5:""}},[s("v-text-field",{model:{value:t.customersItem.bName,callback:function(e){t.$set(t.customersItem,"bName",e)},expression:"customersItem.bName"}})],1),t._v(" "),s("v-flex",{staticStyle:{"padding-top":"8px"},attrs:{xs4:""}},[s("v-btn",{attrs:{outline:""},on:{click:function(e){e.stopPropagation(),t.customersModalCheck=!t.customersModalCheck}}},[t._v("\n                    거래처 선택\n                  ")])],1)],1)],1)]),t._v(" "),s("tr",[s("th",[t._v("결제 방법")]),t._v(" "),s("td",{staticStyle:{width:"30%"}},[s("v-layout",[s("v-flex",[s("v-select",{attrs:{items:["신용카드","현금결제"],"item-text":"paymentName",label:"결제 방법"},model:{value:t.payMethod,callback:function(e){t.payMethod=e},expression:"payMethod"}})],1)],1)],1),t._v(" "),s("th",[t._v("배송요청일")]),t._v(" "),s("td",{staticStyle:{width:"40%"}},[s("v-layout",[s("v-flex",[s("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"120px"},on:{"update:returnValue":function(e){t.date=e}},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[s("v-text-field",{attrs:{slot:"activator",label:"날짜를 선택해주세요","prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),s("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("취소")]),t._v(" "),s("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.date)}}},[t._v("적용")])],1)],1)],1)],1)],1)]),t._v(" "),s("tr",[s("th",[t._v("요청사항")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[s("v-layout",[s("v-flex",[s("v-textarea",{attrs:{name:"input-7-1",rows:"2"},model:{value:t.requests,callback:function(e){t.requests=e},expression:"requests"}})],1)],1)],1)]),t._v(" "),s("tr",[s("th",[t._v("메모")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[s("v-layout",[s("v-flex",[s("v-textarea",{attrs:{name:"input-7-1",rows:"2"},model:{value:t.memo,callback:function(e){t.memo=e},expression:"memo"}})],1)],1)],1)])])])],1)],1),t._v(" "),s("h3",{staticStyle:{"margin-top":"15px"}},[t._v("상품 목록")]),t._v(" "),s("v-layout",{staticStyle:{"padding-top":"20px"}},[s("v-flex",[t._v("\n      전체 "+t._s(t.allCount)+"건\n    ")]),t._v(" "),s("v-flex",{staticStyle:{"text-align":"right"}},[s("v-btn",{attrs:{color:"orange",outline:""},on:{click:function(e){t.openAppendModal()}}},[t._v("\n        상품 추가\n      ")])],1)],1),t._v(" "),s("v-layout",[s("v-flex",[s("v-data-table",{attrs:{headers:t.headers,items:t.orderItems,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v("\n            "+t._s(e.index+1)+"\n          ")]),t._v(" "),s("td",[t._v(t._s(e.item.itemName))]),t._v(" "),s("td",[t._v(t._s(e.item.unit))]),t._v(" "),s("td",[t._v(t._s(e.item.manufacturer))]),t._v(" "),s("td",[t._v(t._s(e.item.qTY))]),t._v(" "),s("td",[t._v(t._s(t.numberWithCommas(e.item.price1)))]),t._v(" "),s("td",[t._v(t._s(t.numberWithCommas(e.item.price2)))]),t._v(" "),s("td",[t._v(t._s(t.numberWithCommas(e.item.price3)))]),t._v(" "),s("td",[t._v(t._s(t.numberWithCommas(e.item.price1*e.item.qTY)))]),t._v(" "),s("td",[s("v-btn",{attrs:{outline:""},on:{click:function(s){t.deleteOneOrderItem(e.item)}}},[t._v("삭제")])],1)]}}])})],1)],1),t._v(" "),s("v-layout",{staticStyle:{"margin-top":"20px"}},[s("v-flex",{staticStyle:{"text-align":"center"}},[s("v-btn",{on:{click:function(e){t.$router.push("/order/list")}}},[t._v("목록으로")]),t._v(" "),s("v-btn",{on:{click:function(e){t.regOrder()}}},[t._v("등록하기")])],1)],1),t._v(" "),s("v-dialog",{attrs:{width:"50%"},model:{value:t.customersModalCheck,callback:function(e){t.customersModalCheck=e},expression:"customersModalCheck"}},[s("v-card",[s("div",{staticStyle:{padding:"10px","background-color":"#263238",color:"white",height:"48px"}},[s("h3",[t._v("거래처 선택")])]),t._v(" "),s("v-layout",[s("v-flex",{staticStyle:{padding:"0px 30px"}},[s("v-data-table",{attrs:{headers:t.customersHeaders,items:t.customersItems,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v(t._s(e.item.id))]),t._v(" "),s("td",[t._v(t._s(e.item.bName))]),t._v(" "),s("td",[t._v(t._s(e.item.mobile))]),t._v(" "),s("td",[t._v(t._s(e.item.manager))]),t._v(" "),s("td",[s("v-btn",{attrs:{outline:"",sm:""},on:{click:function(s){t.selectCustomer(e.item)}}},[t._v("선택")])],1)]}}])})],1)],1)],1)],1),t._v(" "),s("v-dialog",{attrs:{width:"70%"},model:{value:t.appendModalCheck,callback:function(e){t.appendModalCheck=e},expression:"appendModalCheck"}},[s("v-card",[s("div",{staticStyle:{padding:"10px","background-color":"#263238",color:"white",height:"48px"}},[s("h3",[t._v("직배송 상품 선택")])]),t._v(" "),s("v-container",[s("v-layout",{staticStyle:{"margin-top":"15px"}},[s("v-flex",{staticStyle:{padding:"0px 5px"},attrs:{xs8:""}},[s("v-layout",[s("v-flex",[t._v("\n                *해당 거래처에서 자주 주문한 상품 순입니다.\n              ")]),t._v(" "),s("v-flex",[t._v("\n                전체 "+t._s(t.allCount)+"건\n              ")])],1),t._v(" "),s("v-layout",{staticStyle:{"margin-top":"10px"}},[s("v-flex",[s("v-data-table",{attrs:{headers:t.productHeaders,items:t.customerProducts,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v(t._s(e.item.itemName))]),t._v(" "),s("td",[t._v(t._s(e.item.itemQTY))]),t._v(" "),s("td",[t._v(t._s(t.numberWithCommas(e.item.price1)))]),t._v(" "),s("td",[t._v(t._s(t.numberWithCommas(e.item.price2)))]),t._v(" "),s("td",[t._v(t._s(t.numberWithCommas(e.item.price3)))]),t._v(" "),s("td",[s("v-btn",{attrs:{outline:""},on:{click:function(s){t.selectProduct(e.item)}}},[t._v("선택")])],1)]}}])})],1)],1)],1),t._v(" "),s("v-flex",{staticStyle:{padding:"0px 5px"},attrs:{xs4:""}},[s("v-layout",[s("v-flex",[s("span",[t._v("선택상품 목록(전체 "+t._s(t.allCount)+"건)")])]),t._v(" "),s("v-flex",{staticStyle:{"text-align":"right"}},[s("v-btn",{on:{click:function(e){t.defaultSelectItem()}}},[t._v("초기화")])],1)],1),t._v(" "),s("v-layout",{staticStyle:{"margin-top":"10px",border:"2px solid #cccccc","min-height":"600px"}},[s("v-flex",{attrs:{xs12:"",md12:"",sm12:""}},[s("v-data-table",{attrs:{"hide-headers":"","hide-actions":"",items:t.selectItems},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[s("v-layout",[s("v-flex",{attrs:{xs11:""}},[t._v(t._s(e.item.itemName))]),t._v(" "),s("v-flex",{attrs:{xs1:""}},[s("span",{on:{click:function(s){t.deleteOneItem(e.item)}}},[s("span",{staticClass:"fas fa-times"})])])],1),t._v(" "),s("v-layout",[s("v-flex",[s("span",{on:{click:function(s){t.countModify("up",e.index,e.item)}}},[s("span",{staticClass:"fas fa-angle-up"})]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.item.qTY,expression:"props.item.qTY"}],staticStyle:{width:"30px","text-align":"center"},attrs:{type:"text"},domProps:{value:e.item.qTY},on:{input:function(s){s.target.composing||t.$set(e.item,"qTY",s.target.value)}}}),t._v(" "),s("span",{on:{click:function(s){t.countModify("down",e.index,e.item)}}},[s("span",{staticClass:"fas fa-angle-down"})])]),t._v(" "),s("v-flex",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.item.price3,expression:"props.item.price3"}],staticStyle:{width:"60px","text-align":"center"},attrs:{type:"text",disabled:""},domProps:{value:e.item.price3},on:{input:function(s){s.target.composing||t.$set(e.item,"price3",s.target.value)}}}),t._v("원\n                        ")])],1)],1)]}}])},[s("template",{slot:"footer"},[s("td",[s("v-layout",[s("v-flex",[t._v("합계 금액")]),t._v(" "),s("v-flex",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.numberWithCommas(this.totalPrice))+"원")])],1)],1)])],2)],1)],1)],1)],1),t._v(" "),s("v-layout",{staticStyle:{"text-align":"center"}},[s("v-flex",[s("v-btn",{on:{click:function(e){t.closeProductAppendModal()}}},[t._v("닫기")]),t._v(" "),s("v-btn",{on:{click:function(e){t.saveOrderItem()}}},[t._v("저장")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var c=s("VU/8")(r,l,!1,function(t){s("e57o")},"data-v-685a10c4",null);e.default=c.exports},e57o:function(t,e){}});
//# sourceMappingURL=11.66540c10f84a20a6d587.js.map